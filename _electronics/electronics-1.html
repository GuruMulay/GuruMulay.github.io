---
title: "High Power DC Motor Driver using Bootstrap Motor Driver ICs"
excerpt: "<br/> <img src='/images/electronics/motor-driver-ir/md1.JPG'><br/> <small></small> "
collection: electronics
tags:
  - DC-motor-driver
  - bootstrapping
  - power-MOSFETs
  - PCB-design
  - EAGLE-PCB-software
---


<hr style="border-color: silver;">
<a href="https://github.com/GuruMulay/dc-motor-driver-ir-smallest-pcb"><button type="button" class="btn btn--info"><i class="fa fa-github"></i> GitHub Source</button></a>
<br/>
<a href="https://cadlab.io/project/1364/master/files"><button type="button" class="btn btn--info"><i class="fa fa-object-group"></i> CadlabIO Source</button></a>
<hr style="border-color: silver;">

<!--[TODO]-->

<p style="font-size:95%; margin-bottom: 1em;">
    I designed the layout of this high-power <b>MOSFET Motor Driver</b> that drives 2 motors independently. The original
    configuration of this circuit was developed by my teammates Bhairav Shah and Harshal Kalyane in 2011. The main
    goal was to build a highly robust and highly reliable DC motor driver that yielded currents over 15 Amperes
    continuously at 24V DC voltage. During Robocon 2012, this driver drove a 23 Kg (50 lbs), semi-automatic Robot that
    carried a person weighing 70 Kg (155 lbs). The circuit was build with a MOSFET driver IC that worked on the concept
    of <a href="https://en.wikipedia.org/wiki/Bootstrapping_(electronics)">bootstrapping</a>. I spend several
    weeks on improving and revising the board that ended up with several version of the board. I had to obey some of the
    strict high-power PCB circuit design rules to avoid issues such as crosstalk, impedance mismatch, and
    electromagnetic interference/noise due to motor and its high currents. This design turned out to be very reliable and never
    failed during its deployment in actual one-on-one matches against other teams/robots. Even after 5 years when this
    motor driver was first introduced, I feel extremely passionate and nostalgic about it. This project will always be
    in the top-5 favourite projects of mine.

    <!--Isolation, grounding -->
</p>


<a href="https://farm2.staticflickr.com/1772/29053735687_a37c7a6b0d_k.jpg"><img  alt="High-power MOSFET DC Motor Driver" src="https://farm2.staticflickr.com/1772/29053735687_a37c7a6b0d_k.jpg" style="float: left; width: 97%; margin-right: 1%; margin-bottom: 0.5em;"  ></a>


<a href="https://farm2.staticflickr.com/1799/43272708304_e517f64b16_k.jpg"><img  alt="High-power MOSFET DC Motor Driver" src="https://farm2.staticflickr.com/1799/43272708304_e517f64b16_k.jpg" style="float: left; width: 48%; margin-right: 1%; margin-bottom: 0.5em;"  ></a>
<a href="https://farm2.staticflickr.com/1818/29053736207_19b9ad0963_k.jpg"><img  alt="High-power MOSFET DC Motor Driver" src="https://farm2.staticflickr.com/1818/29053736207_19b9ad0963_k.jpg" style="float: left; width: 48%; margin-right: 1%; margin-bottom: 0.5em;"  ></a>


<a href="https://farm2.staticflickr.com/1771/43272706744_4db7d0c963_k.jpg"><img  alt="High-power MOSFET DC Motor Driver" src="https://farm2.staticflickr.com/1771/43272706744_4db7d0c963_k.jpg" style="float: left; width: 48%; margin-right: 1%; margin-bottom: 0.5em;"  ></a>
<a href="https://farm1.staticflickr.com/942/29053733307_05d1eb1713_k.jpg"><img  alt="High-power MOSFET DC Motor Driver" src="https://farm1.staticflickr.com/942/29053733307_05d1eb1713_k.jpg" style="float: left; width: 48%; margin-right: 1%; margin-bottom: 0.5em;"  ></a>


</br>
<hr style="color:#97CE95" />

<p style="font-size:95%; margin-bottom: 1em;">
Routing in progress using EAGLE PCB design software:
</p>

<a href="https://farm1.staticflickr.com/931/43285473704_07228a9b29_k.jpg"><img  alt="Routing in progress using EAGLE PCB design software" src="https://farm1.staticflickr.com/931/43285473704_07228a9b29_k.jpg" style="float: left; width: 97%; margin-right: 3%; margin-bottom: 0.5em;"  ></a>
<a href="https://farm2.staticflickr.com/1777/43977538302_fd49f18367_b.jpg"><img  alt="Routing in progress using EAGLE PCB design software" src="https://farm2.staticflickr.com/1777/43977538302_fd49f18367_b.jpg" style="float: left; width: 97%; margin-right: 3%; margin-bottom: 0.5em;"  ></a>


</br>
<hr style="color:#97CE95" />

<p style="font-size:95%; margin-bottom: 1em;">
Brand new PCBs:
</p>

<a href="https://farm2.staticflickr.com/1836/44122007622_450b70b850_k.jpg"><img  alt="Brand new PCBs" src="https://farm2.staticflickr.com/1836/44122007622_450b70b850_k.jpg" style="float: left; width: 97%; margin-right: 3%; margin-bottom: 0.5em;"  ></a>



</br>
<hr style="color:#97CE95" />

<p style="font-size:95%; margin-bottom: 1em;">
Signal-testing a quick-and-dirty prototype:
</p>

<a href="https://farm2.staticflickr.com/1837/29053733817_f8e57e962e_k.jpg"><img  alt="High-power MOSFET DC Motor Driver" src="https://farm2.staticflickr.com/1837/29053733817_f8e57e962e_k.jpg[" style="float: left; width: 97%; margin-right: 3%; margin-bottom: 0.5em;"  ></a>

</br>
<hr style="color:#97CE95" />

<p style="font-size:95%; margin-bottom: 1em;">
    A major malfunction that exploded the MOSFETs in the prototype, which literally caused the bot to catch fire. Took some efforts to extinguish the fire! Fire was so huge that I panicked and asked my buddies to get a bucket of <b>water</b> in that moment. Not to mention that a 24V LiPo battery was still connected. My buddies still make fun of me for that. LOL.
</p>

<a href="https://farm2.staticflickr.com/1837/29053734547_d17a3828d5_k.jpg"><img  alt="High-power MOSFET DC Motor Driver" src="https://farm2.staticflickr.com/1837/29053734547_d17a3828d5_k.jpg" style="float: left; width: 97%; margin-right: 1%; margin-bottom: 0.5em;"  ></a>



<!--<hr style="border-color: silver;">-->
<!--<a href="https://github.com/GuruMulay/content-based-authorship-detection-using-tfidf-score" ><button type="button" class="btn btn&#45;&#45;info"><i class="fa fa-github"></i> GitHub Source</button></a>-->
<!--&lt;!&ndash;<i class="fa fa-file-code-o"></i>&ndash;&gt;-->
<!--&lt;!&ndash;<a href="#" class="btn btn&#45;&#45;inverse">Inverse Button</a>&ndash;&gt;-->
<!--&lt;!&ndash;<a href="#" class="btn btn&#45;&#45;info">Info Button</a>&ndash;&gt;-->
<!--&lt;!&ndash;<iframe src="https://ghbtns.com/github-btn.html?user=gurumulay&repo=big-data-class/tree/master/n-gram-analysis-of-gutenberg&type=star&count=false&size=large" frameborder="0" scrolling="0" width="160px" height="30px"></iframe>&ndash;&gt;-->
<!--<hr style="border-color: silver;">-->


<!--&lt;!&ndash;##############&ndash;&gt;-->
<!--&lt;!&ndash;<hr>&ndash;&gt;-->
<!--<p>-->
    <!--<big>-->
    <!--<b>Introduction:</b>-->
    <!--</big>-->
<!--</p>-->


<!--<p>-->
    <!--The goal is to build an authorship detection system that provides a ranked list of-->
    <!--possible authors for a document whose authorship is unknown. The system uses N-gram analysis from-->
    <!--<a href="/datascience/datascience-3/">this project</a>. In particular, I used the word uni-grams from that project.-->

    <!--Finding the attributes of literature content written by an author is important to detect unique-->
    <!--writing style for that author. I built an attribute vector for each of the authors with the help of-->
    <!--<a href="https://en.wikipedia.org/wiki/Tf%E2%80%93idf">Term Frequency and Inverse Document Frequency (TF-IDF)</a>-->
    <!--analysis. Authorship is determined based on the similarity between the attribute vectors of the unseen document and-->
    <!--the pre-computed attribute vectors of authors. TF-IDF is used to calculate the weights of each of the entities in-->
    <!--the attribute vector.-->


<!--</p>-->


<!--&lt;!&ndash;##############&ndash;&gt;-->
<!--<hr>-->
<!--<p>-->
    <!--<big>-->
    <!--<b>Definitions:</b>-->
    <!--</big>-->
<!--</p>-->


<!--&lt;!&ndash;MathJax examples&ndash;&gt;-->

<!--&lt;!&ndash;<p>&ndash;&gt;-->
  <!--&lt;!&ndash;When \(a \ne 0\), there are two solutions to \(ax^2 + bx + c = 0\) and they are&ndash;&gt;-->
  <!--&lt;!&ndash;$$x = {-b \pm \sqrt{b^2-4ac} \over 2a}.$$&ndash;&gt;-->
<!--&lt;!&ndash;</p>&ndash;&gt;-->

    <!--&lt;!&ndash;In equation \eqref{eq:sample}&ndash;&gt;-->
    <!--&lt;!&ndash;&ndash;&gt;-->
    <!--&lt;!&ndash;\begin{equation}&ndash;&gt;-->
    <!--&lt;!&ndash;\int_0^\infty \frac{x^3}{e^x-1}\,dx = \frac{\pi^4}{15}&ndash;&gt;-->
    <!--&lt;!&ndash;\label{eq:sample}&ndash;&gt;-->
    <!--&lt;!&ndash;\end{equation}&ndash;&gt;-->


<!--<p>-->
    <!--<b>Term Frequency:</b>-->
<!--</p>-->

<!--<p>-->
    <!--Let's assume that we have a collection of documents written by M authors. This collection of documents may-->
    <!--contain multiple books written by an author. Letâ€™s define a set of documents written by same author as-->
    <!--a sub-collection $j$. We define $f_{ij}$ to be the frequency (Number of occurrences) of term (word) $i$ in-->
    <!--sub-collection $j$.-->

    <!--<br/>-->
    <!--\begin{equation}-->
    <!--TF_{ij} = 0.5 +  {f_{ij} \over max_k f_{kj}}-->
    <!--\label{eq:tf1}-->
    <!--\end{equation}-->
    <!--<br/>-->

    <!--We use the augmented $TF$ (represented by 0.5 added initially in term 1 and then multiplied in terms 2 of-->
    <!--\eqref{eq:tf1}) to prevent a bias towards longer documents. Term 2 is the raw frequency divided by the-->
    <!--maximum raw frequency of any term $k$ in the sub-collection $j$. Stop words (e.g., a, an, the, etc) were-->
    <!--not eliminated from the corpus. The most frequent term in the sub-collection will have a augmented $TF$ value of 1.-->

<!--</p>-->



<!--<p>-->
    <!--<b>Inverse Document Frequency:</b>-->
<!--</p>-->


<!--<p>-->
    <!--Suppose that term $i$ appears in $n_i$ sub-collections within the corpus. For this assignment, we define the-->
    <!--$IDF_i$, as:-->

    <!--\begin{equation}-->
    <!--IDF_i = log_{10} ({N \over n_i})-->
    <!--\label{eq:idf1}-->
    <!--\end{equation}-->

    <!--where, $N$ is the total number of sub-collections (same as the number of authors).-->
<!--</p>-->


<!--<p>-->
    <!--<b>TF-IDF value:</b>-->
<!--</p>-->

<!--<p>-->
    <!--The TF-IDF score is the product - $TF_{ij}$ $\times$ $IDF_i$. The terms with the highest TF-IDF score are-->
    <!--considered the best words that characterize the sub-collection (document). They are the most important-->
    <!--attributes in the sub-collection's attribute vector.-->
<!--</p>-->



<!--&lt;!&ndash;##############&ndash;&gt;-->
<!--<hr>-->
<!--<p>-->
    <!--<big>-->
    <!--<b>Cosine Distance between Attribute Vectors:</b>-->
    <!--</big>-->
<!--</p>-->

<!--<p>-->
    <!--After calculating the TF, IDF, and TF-IDF scores for set of books written by the same author (sub-collection)-->
    <!--in the corpus, we generate an <b> Author Attribute Vector (AAV) </b> as follows:-->

    <!--Every author will have their own AAV representing their unique writing style with the help of TF-IDF score of words-->
    <!--in the entire corpus. In order to find authorship of a unseen document, we compare the AAV of that document with-->
    <!--AAVs of all the possible authors. Note that to compare an arbitrary AAV (from the document with unknown authorship)-->
    <!--and existing AAVs, all of the AAVs must have the same dimension. For this comparison we calculate the <b>Cosine-->
    <!--Distance</b> between two AAVs that gives a measure of similarity between the authorsâ€™ writing styles.-->

    <!--Suppose that we have two authors with vectors, $AAV_1 = [x_1 , x_2 , ..., x_m]$ and $AAV_2 = [y_1 , y_2 , ..., y_m]$.-->
    <!--The Cosine Similarity between them is defined as,-->

<!--</p>-->

<!--<p style="text-align: center;">-->
    <!--&lt;!&ndash;<figure>&ndash;&gt;-->
    <!--<a href="/images/datascience/tfidf/cosine.jpg"><img src="/images/datascience/tfidf/cosine.jpg"></a>-->
    <!--<figcaption class="figure-caption text-center"><a href="https://en.wikipedia.org/wiki/Cosine_similarity" title="">Cosine similarity [Source: Wikipedia]</a></figcaption>-->
    <!--&lt;!&ndash;</figure>&ndash;&gt;-->
<!--</p>-->

<!--<p>-->
    <!--Where $AAV_1$ is represented by $A$ and $AAV_2$ by $B$. Using this formula, we will be able to create a ranked list-->
    <!--of potential authors for a given document with unknown authorship. Logically, the author with highest cosine-->
    <!--similarity with given document will be the most probable author of the document.-->
<!--</p>-->

<!--&lt;!&ndash;##############&ndash;&gt;-->
<!--<hr>-->
<!--<p>-->
    <!--<big>-->
    <!--<b>Dataset:</b>-->
    <!--</big>-->
<!--</p>-->

<!--<p>-->
    <!--Read <a href="/datascience/datascience-3/">the dataset description</a> from a previous post.-->
<!--</p>-->



<!--&lt;!&ndash;##############&ndash;&gt;-->
<!--<hr>-->
<!--<p>-->
    <!--<big>-->
    <!--<b>Methodology:</b>-->
    <!--</big>-->
<!--</p>-->


<!--<p>-->

<!--<ul>-->

    <!--<li><strong>Part 1:</strong> Calculate the TF, IDF, and TF-IDF values for all terms for all of the sub-collections-->
        <!--in the corpus.</li>-->

    <!--<li><strong>Part 2:</strong> Create the AAVs (author attribute vectors) for every author.</li>-->

    <!--<li><strong>Part 3:</strong> Find cosine similarity between AAV of given document with unknown author and all the-->
        <!--authors in the corpus.</li>-->

<!--</ul>-->


<!--We use multiple Mappers and Reducers chained together (called job chaining) that produce intermediate results and-->
<!--then final results based on those intermediate results. Final output is a top-10 list of potential authors for the given-->
<!--document with unknown authorship. Part 1 and Part 2 is implemented-->
<!--<a href="https://github.com/GuruMulay/content-based-authorship-detection-using-tfidf-score/tree/master/authorAttrVect">here</a>-->
<!--and Part 3 is implemented-->
<!--<a href="https://github.com/GuruMulay/content-based-authorship-detection-using-tfidf-score/tree/master/cosineSimilarity">here</a>.-->

<!--</p>-->


<!--&lt;!&ndash;##############&ndash;&gt;-->
<!--<hr>-->
<!--<p>-->
    <!--<big>-->
    <!--<b>Outputs:</b>-->
    <!--</big>-->
<!--</p>-->

<!--Originally, we used the complete dataset as described above in the dataset section to found AAVs for all the authors in-->
<!--that dataset and then calculated their cosine similarity metric with AAV of the given document with unknown author.-->

<!--But for the purpose of illustration I will use a very small toy dataset containing 12 lines that can be found-->
<!--<a href="https://github.com/GuruMulay/content-based-authorship-detection-using-tfidf-score/blob/master/authorAttrVect_toy_dataset_illustration/testData12.txt">here</a>.-->

<!--<br/>-->
<!--The-->
<!--<a href="https://github.com/GuruMulay/content-based-authorship-detection-using-tfidf-score/blob/master/authorAttrVect_toy_dataset_illustration/">-->
    <!--<b>authorAttrVect_toy_dataset_illustration</b></a> direcory contains a very small toy dataset fed as input to the-->
<!--system and the outputs at every map reduce step of authorAttrVect map-reduce program from the repo.-->
<!--The final output is <i>mr4aav12.txt</i> that contains TF-IDF scores in the final column.-->


<!--&lt;!&ndash;Here are some snippets from the outputs of map reduce programs that gives AAV vectors for the authors from toy dataset.&ndash;&gt;-->
<!--Here is a snippet from the output of map-reduce described programs above.-->

<!--<br style="margin-bottom:10px;"/>-->
<!--<div style="text-align: center">-->
    <!--<a href="https://raw.githubusercontent.com/GuruMulay/content-based-authorship-detection-using-tfidf-score/master/tfidf.jpg?token=AOOYCIfnE59APKitHCL5zO9s0beNAiWdks5bp_K1wA%3D%3D">-->
        <!--<img src="https://raw.githubusercontent.com/GuruMulay/content-based-authorship-detection-using-tfidf-score/master/tfidf.jpg?token=AOOYCIfnE59APKitHCL5zO9s0beNAiWdks5bp_K1wA%3D%3D" alt="gutenberg ngram analysis using hadoop map-reduce" align="middle" hspace="30" height="350">-->
    <!--</a>-->

    <!--<br/>-->
    <!--<br/>-->
    <!--<figcaption>Fig. 1: TF-IDF scores for toy dataset (in final column)</figcaption>-->
<!--</div>-->
<!--<br/>-->


<!--Finally, we provide a document with unknown authorship to the <a href="https://github.com/GuruMulay/content-based-authorship-detection-using-tfidf-score/tree/master/cosineSimilarity">-->
    <!--<b>cosineSimilarity</b></a> map-reduce program.  It produces the list of potential that are could have written that-->
<!--document. Suppose we fed a document written <i>twain</i> as a document with unknown authorship. The cosineSimilarity program-->
<!--will produce a list of potential authors like this one:-->


<!--<br style="margin-bottom:20px;"/>-->
<!--<p style="text-align: center;">-->
    <!--<a href="https://raw.githubusercontent.com/GuruMulay/content-based-authorship-detection-using-tfidf-score/master/top-auth.jpg?token=AOOYCGdBUN-jbjInfJ8iqHLNmFksGktDks5bp_FdwA%3D%3D"><img src="https://raw.githubusercontent.com/GuruMulay/content-based-authorship-detection-using-tfidf-score/master/top-auth.jpg?token=AOOYCGdBUN-jbjInfJ8iqHLNmFksGktDks5bp_FdwA%3D%3D"></a>-->
    <!--<figcaption class="figure-caption text-center">Fig. 2: Top authors for a document with unknown author</figcaption>-->
<!--</p>-->



<!--&lt;!&ndash;&lt;!&ndash;##############&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;<hr>&ndash;&gt;-->
<!--&lt;!&ndash;<p>&ndash;&gt;-->
    <!--&lt;!&ndash;<big>&ndash;&gt;-->
    <!--&lt;!&ndash;<b>References:</b>&ndash;&gt;-->
    <!--&lt;!&ndash;</big>&ndash;&gt;-->
<!--&lt;!&ndash;</p>&ndash;&gt;-->


<!--&lt;!&ndash;<ol type="1">&ndash;&gt;-->
    <!--&lt;!&ndash;<li>https://en.wikipedia.org/wiki/N-gram</li>&ndash;&gt;-->
    <!--&lt;!&ndash;<li>https://www.gutenberg.org</li>&ndash;&gt;-->
<!--&lt;!&ndash;</ol>&ndash;&gt;-->



<!--&lt;!&ndash;##############&ndash;&gt;-->
<!--<hr>-->
<!--<p>-->
    <!--<small>-->
    <!--<b>Note:</b>-->
    <!--Some of the content for this post is taken from course material of CS435 (CSU) written by Prof. Sangmi Lee Pallickara and GTAs.-->
    <!--</small>-->
<!--</p>-->
<!--<hr>-->