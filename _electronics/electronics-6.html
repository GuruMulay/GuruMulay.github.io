---
title: "ATMEGA32 Micro-controller Board to Interface Sony PS2 Controller"
excerpt: "<br/><img src='/images/electronics/ps2atmega32/both1.png'><br/> <small></small> "
collection: electronics
tags:
  - sony-PS2-controller
  - ATMEGA32
  - interface-board
  - micro-controller
  - PCB-design
  - EAGLE-PCB-softwares
  - serial-communication
---



<hr style="border-color: silver;">
<a href="https://github.com/GuruMulay/ps2-atmega32-board-robocon2013"><button type="button" class="btn btn--info"><i class="fa fa-github"></i> GitHub Source</button></a>
<br/>
<a href="https://cadlab.io/project/1365/master/files"><button type="button" class="btn btn--info"><i class="fa fa-object-group"></i> CadlabIO Source</button></a>
<hr style="border-color: silver;">


##############
<hr>
<p>
    <big>
    <b>Context and Motivation:</b>
    </big>
</p>


<p>
    The semi-automatic robots that my robotics group designed were usually maneuvered using a Sony PS2 controller. As a
    primary function, PS2 controlled the speed and direction of the robots using the analog joysticks on the controller.
    The secondary functions were turning jaws to grab objects open and close, controlling secondary motors on the robot
    such as the one used to raise or lower the gantry system in the front. In image below, you can see our robot
    operator controlling the semi-automatic robot using the PS2 controller.

    <br/>
    <br/>
    
    A micro-controller reads the signals coming from PS2 via PS2 specific connector. For this connector, the signals are
    - DATA, COMMAND, GND, VCC, ATTN, CLK, and ACKN. In initial versions of PS2 controller PCB, we fed the signals coming
    from the PS2 directly to our master micro-controller Atmega2560 that also handles algorithms of forward-inverse kinematics,
    path planning, sensing, etc. Control signals coming from PS2 were fed directly to the master. Master converted these
    signals in appropriate motor speeds and directions. However, as we moved from simple two-wheel driver to a holonomic
    driver system for the robots, the master started handling four motors simultaneously. This caused master
    micro-controller to get overloaded as it handled too many algorithms simultaneously.

    <br/>
    <br/>

    One solution to avoid processing of PS2 controller signals on the master MCU was to create a modular design. We
    decided to design a PCB with an MCU that solely handles and processed the PS2 signals before routing them to the
    master micro-controller. So, modularization was the primary motive behind this PCB.



    <br/>
    <br/>

    This motor driver is for bidirectional speed control of only one motor. It requires four MOSFETs for to form a
    standard H-bridge configuration. The PCB has dimensions of 5.3 cm X 4.0 cm (~ 2.08 inch X 1.57 inch).
    In perspective of a DC-motor driver capable of providing 5-10 Amperes of continuous current, this board was really
    a small, tiny, self-containing, and compact board.

    <br/>
    <br/>

    I tested this motor driver on-load with various types of DC motors such as standard, economic,
    <a href="https://www.walmart.com/ip/High-Torque-Low-Speed-Solder-Cylindricaluction-Gear-Box-Motor-DC-24V-20RPM/127991422">
        low-end DC motors like these</a>, MAXON DC motors, power-window motor, wiper motor, etc. The later two are high
    torque motors which require very high power to drive them while former two are high RPM motors that work on low
    power. In figure 4 you can see the circuit being tested on a wiper motor which drew 3A current at 9V without
    even putting any load on the motor. With on-load testing the typical continuous current for this particular motor
    was about 8A.

    <br/>
    <br/>

    After working with DIP packaged MOSFETs for several years, I found it astonishing to see those tiny, pea-sized MOSFET
    carried continuous currents over 5A for several minutes on-load at operating voltage of 24V. Even more surprising
    was that the MOSFETs did not heat crazily unlike the DIP MOSFETs at the same power levels. I still cannot fathom the
    fact that a tiny thing made from silicon and other fancy stuff can conduct excess of 5A currents continuously
    without burning out!


</p>


<p>
    <br style="margin-bottom:10px;"/>
    <div style="text-align: center">
        <a href="https://farm2.staticflickr.com/1887/30304823788_1b3a643b12_k.jpg">
            <img alt="" src="https://farm2.staticflickr.com/1887/30304823788_1b3a643b12_k.jpg" style="float: left; width: 49%; margin-right: 1%; margin-bottom: 1em;"></a>
        <a href="https://farm2.staticflickr.com/1911/45711583292_47d51fbb4c_o.jpg">
            <img alt="" src="https://farm2.staticflickr.com/1911/45711583292_47d51fbb4c_o.jpg" style="float: left; width: 49%; margin-right: 1%; margin-bottom: 1em;"></a>
        <br/>
        <br/>
        <figcaption>Fig. 1: PS2 controller to maneuver the semi-automatic robot (PS2 at the top of front wheel)</figcaption>
    </div>
    <br/>

</p>


<p>
    <br style="margin-bottom:10px;"/>
    <div style="text-align: center">
        <a href="https://raw.githubusercontent.com/GuruMulay/ps2-atmega32-board-robocon2013/master/images/ps2_both.png">
            <img src="https://raw.githubusercontent.com/GuruMulay/ps2-atmega32-board-robocon2013/master/images/ps2_both.png" alt="Atmega32-PS2 interface PCB" align="middle" hspace="10" height="300">
        </a>
        <br/>
        <figcaption>Fig. 1: Atmega32-PS2 interface PCB</figcaption>
    </div>
    <br/>

</p>




<p>
    <br style="margin-bottom:10px;"/>
    <div style="text-align: center">
        <a href="https://raw.githubusercontent.com/GuruMulay/ps2-atmega32-board-robocon2013/master/images/ps2_top.png">
            <img alt="Atmega32-PS2 interface PCB: Top" src="https://raw.githubusercontent.com/GuruMulay/ps2-atmega32-board-robocon2013/master/images/ps2_top.png" style="float: left; width: 49%; margin-right: 1%; margin-bottom: 1em;"></a>
        <a href="https://raw.githubusercontent.com/GuruMulay/ps2-atmega32-board-robocon2013/master/images/ps2_bottom.png">
            <img alt="Atmega32-PS2 interface PCB: Bottom" src="https://raw.githubusercontent.com/GuruMulay/ps2-atmega32-board-robocon2013/master/images/ps2_bottom.png" style="float: left; width: 49%; margin-right: 1%; margin-bottom: 1em;"></a>
        <br/>
        <br/>
        <figcaption>Fig. 2: Atmega32-PS2 interface PCB: Top and Bottom side</figcaption>
    </div>
    <br/>

</p>




<p>


    <br/>
    <br/>


</p>


<p>
    <br style="margin-bottom:10px;"/>
    <div style="text-align: center">
        <a href="https://raw.githubusercontent.com/GuruMulay/ps2-atmega32-board-robocon2013/master/images/DSC_0080.jpg">
            <img src="https://raw.githubusercontent.com/GuruMulay/ps2-atmega32-board-robocon2013/master/images/DSC_0080.jpg" alt="Atmega32-PS2 interface PCB in action, mounted on a robot" align="middle" hspace="10" height="300">
        </a>
        <br/>
        <figcaption>Fig. 3: Atmega32-PS2 interface PCB in action, mounted on a robot</figcaption>
    </div>
    <br/>

</p>


<!--##############-->
<hr>
<p>
    <big>
    <b>Circuit Components:</b>
    </big>
</p>

<ul>
    <li><strong>ATMEL Atmega32 MCU:</strong> Micro-controller that provides a communication interface between a master
        micro-controller and PS2 controller.</li>

    <li><strong>Crystal for Atmega32:</strong> Frequency </li>

    <li><strong>7805D SMD Voltage Regulator:</strong> Generates 5 V required by Atmega32 IC.</li>

    <li><strong>LEDs, diodes, and RCL components:</strong> Power indicator LEDs. Voltage regulator protection diode.
        The exact values of these components can be found in the schematic image below.</li>

    <li><strong>Connectors:</strong> PS2 Female connector, Header connectors, IC holders, relimates, Power Jack
        connector, berg strips.</li>
</ul>


<p>
    <br style="margin-bottom:10px;"/>
    <div style="text-align: center">
        <a href="https://raw.githubusercontent.com/GuruMulay/ps2-atmega32-board-robocon2013/master/images/ps2_atmega32_sch.png">
            <img src="https://raw.githubusercontent.com/GuruMulay/ps2-atmega32-board-robocon2013/master/images/ps2_atmega32_sch.png" alt="Atmega32-PS2 interface PCB schematic" align="middle" hspace="10" height="300">
        </a>
        <br/>
        <figcaption>Fig. 4: Atmega32-PS2 interface PCB schematic</figcaption>
    </div>
    <br/>

</p>

