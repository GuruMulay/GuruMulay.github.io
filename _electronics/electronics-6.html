---
title: "ATMEGA32 Micro-controller Board to Interface Sony PS2 Controller"
excerpt: "<br/><img src='/images/electronics/ps2atmega32/both1.png'><br/> <small></small> "
collection: electronics
tags:
  - sony-PS2-controller
  - ATMEGA32
  - interface-board
  - micro-controller
  - PCB-design
  - EAGLE-PCB-softwares
  - serial-communication
---



<hr style="border-color: silver;">
<a href="https://github.com/GuruMulay/ps2-atmega32-board-robocon2013"><button type="button" class="btn btn--info"><i class="fa fa-github"></i> GitHub Source</button></a>
<br/>
<a href="https://cadlab.io/project/1365/master/files"><button type="button" class="btn btn--info"><i class="fa fa-object-group"></i> CadlabIO Source</button></a>
<hr style="border-color: silver;">


<!--##############-->
<!--<hr>-->
<p>
    <big>
    <b>Introduction and Motivation:</b>
    </big>
</p>


<p>
    The semi-automatic robots that my robotics group designed were usually maneuvered using a Sony PS2 controller. As a
    primary function, PS2 controlled the speed and direction of the robots using the analog joysticks on the controller.
    The secondary functions were turning jaws open and close to grab objects, controlling secondary motors on the robot
    such as the one used to raise or lower the gantry system in the front. The image (Figure 1) below shows one such
    semiautomatic robot that an operator controlled using the PS2 controller.

    <br/>
    <br/>


    To achieve PS2-based control, a master micro-controller onn the robot reads the signals coming from PS2 via
    PS2 specific connector. For this connector, the signals are - DATA, COMMAND, GND, VCC, ATTN, CLK, and ACKN.
    In initial versions of PS2 controller PCB, we fed the signals coming from the PS2 directly to our master
    micro-controller (Atmega2560) that also handles algorithms of forward-inverse kinematics, path planning, sensing,
    etc. Control signals coming from PS2 were fed directly to the master micro-controller. Master converted these
    signals in appropriate motor speeds and directions. However, as we moved from simple two-wheel driver to a holonomic
    driver system for the robots, the master started handling velocity control algorithms of four motors simultaneously.
    This caused master micro-controller to get overloaded as it handled many computationally expensive algorithms
    simultaneously. That is why we decided to isolate the PS2 signal processing from the main algorithms running on
    the master micro-controller.

    <br/>
    <br/>

    One solution to avoid processing of PS2 controller signals on the master micro-controller was to create a modular
    design. We decided to design a PCB with a micro-controller that solely handled and processed the PS2 signals before
    routing them to the master micro-controller.
    Hence, modularization was the primary motive behind the design of this PCB that isolated PS2 signal processing from
    main algorithms of navigation and sensing on our semi-automatic robots. We deployed this modularized approach the
    next year on our semi-automatic robot. While my other teammates worked on the software part of modularization and
    isolation of the algorithms, I worked on the PCB design. After multiple prototypes, I decided on this specific
    prototype which was compact for our robot that year (as shown in figure 2 - the robot on top with a PS2).



    <br/>
    <br/>

    This motor driver is for bidirectional speed control of only one motor. It requires four MOSFETs for to form a
    standard H-bridge configuration. The PCB has dimensions of 5.3 cm X 4.0 cm (~ 2.08 inch X 1.57 inch).
    In perspective of a DC-motor driver capable of providing 5-10 Amperes of continuous current, this board was really
    a small, tiny, self-containing, and compact board.

    <br/>
    <br/>


</p>


<p>
    <br style="margin-bottom:10px;"/>
    <div style="text-align: center">
        <a href="https://farm2.staticflickr.com/1887/30304823788_1b3a643b12_k.jpg">
            <img alt="PS2 controller to maneuver the semi-automatic robot (PS2 at the top of front wheel)" src="https://farm2.staticflickr.com/1887/30304823788_1b3a643b12_k.jpg" style="float: left; width: 49%; margin-right: 1%; margin-bottom: 1em;"></a>
        <a href="https://farm2.staticflickr.com/1911/45711583292_47d51fbb4c_o.jpg">
            <img alt="PS2 controller to maneuver the semi-automatic robot (PS2 at the top of front wheel)" src="https://farm2.staticflickr.com/1911/45711583292_47d51fbb4c_o.jpg" style="float: left; width: 49%; margin-right: 1%; margin-bottom: 1em;"></a>
        <br/>
        <br/>
        <figcaption>Fig. 1: PS2 controller to maneuver the semi-automatic robot (PS2 at the top of front wheel)</figcaption>
    </div>
    <br/>
</p>



<p>
    <br style="margin-bottom:10px;"/>
    <div style="text-align: center">
        <a href="https://farm2.staticflickr.com/1856/44123682322_46531d257b_k.jpg">
            <img src="https://farm2.staticflickr.com/1856/44123682322_46531d257b_k.jpg" alt="Deploying this PCB design on a semi-automatic robot (robot on the top half)" align="middle" hspace="0" height="300">
        </a>
        <br/>
        <br/>
        <figcaption>Fig. 2: Deploying this PCB design on a semi-automatic robot (robot in the top half)</figcaption>
    </div>
    <br/>
</p>



<p>
    <br style="margin-bottom:10px;"/>
    <div style="text-align: center">
        <a href="https://raw.githubusercontent.com/GuruMulay/ps2-atmega32-board-robocon2013/master/images/ps2_both.png">
            <img src="https://raw.githubusercontent.com/GuruMulay/ps2-atmega32-board-robocon2013/master/images/ps2_both.png" alt="Atmega32-PS2 interface PCB" align="middle" hspace="0" height="300">
        </a>
        <br/>
        <br/>
        <figcaption>Fig. 3: Atmega32-PS2 interface PCB (All layers)</figcaption>
    </div>
    <br/>
</p>




<p>
    <br style="margin-bottom:10px;"/>
    <div style="text-align: center">
        <a href="https://raw.githubusercontent.com/GuruMulay/ps2-atmega32-board-robocon2013/master/images/ps2_top.png">
            <img alt="Atmega32-PS2 interface PCB: Top" src="https://raw.githubusercontent.com/GuruMulay/ps2-atmega32-board-robocon2013/master/images/ps2_top.png" style="float: left; width: 49%; margin-right: 1%; margin-bottom: 1em;"></a>
        <a href="https://raw.githubusercontent.com/GuruMulay/ps2-atmega32-board-robocon2013/master/images/ps2_bottom.png">
            <img alt="Atmega32-PS2 interface PCB: Bottom" src="https://raw.githubusercontent.com/GuruMulay/ps2-atmega32-board-robocon2013/master/images/ps2_bottom.png" style="float: left; width: 49%; margin-right: 1%; margin-bottom: 1em;"></a>
        <br/>
        <br/>
        <figcaption>Fig. 4: Atmega32-PS2 interface PCB: Top and Bottom sides</figcaption>
    </div>
    <br/>
</p>


<p>
    Here, is the actual PCB that was deployed on the robot from figure 2. I tried to keep it compact because the the
    mounting position of this PCB couldn't be predetermined during mechanical design considerations. Therefore, a compact
    design helped us mount this PCB almost anywhere on the bot as we wanted.
</p>


<p>
    <br style="margin-bottom:10px;"/>
    <div style="text-align: center">
        <a href="https://raw.githubusercontent.com/GuruMulay/ps2-atmega32-board-robocon2013/master/images/DSC_0080.jpg">
            <img src="https://raw.githubusercontent.com/GuruMulay/ps2-atmega32-board-robocon2013/master/images/DSC_0080.jpg" alt="Atmega32-PS2 interface PCB in action, mounted on a robot" align="middle" hspace="0" height="300">
        </a>
        <br/>
        <br/>
        <figcaption>Fig. 5: Atmega32-PS2 interface PCB in action, mounted on a robot</figcaption>
    </div>
    <br/>
</p>


<!--##############-->
<hr>
<p>
    <big>
    <b>Circuit Components:</b>
    </big>
</p>

<ul>
    <li><strong>ATMEL Atmega32 MCU:</strong> Micro-controller that provides a communication interface between a master
        micro-controller and PS2 controller.</li>

    <li><strong>Crystal for Atmega32:</strong> Frequency </li>

    <li><strong>7805D SMD Voltage Regulator:</strong> Generates 5 V required by Atmega32 IC.</li>

    <li><strong>LEDs, diodes, and RCL components:</strong> Power indicator LEDs. Voltage regulator protection diode.
        The exact values of these components can be found in the schematic image below.</li>

    <li><strong>Connectors:</strong> PS2 Female connector, Header connectors, IC holders, relimates, Power Jack
        connector, berg strips.</li>
</ul>


<!--##############-->
<hr>
<p>
    <big>
    <b>Circuit Schematic:</b>
    </big>
</p>


<p>
    <br style="margin-bottom:10px;"/>
    <div style="text-align: center">
        <a href="https://raw.githubusercontent.com/GuruMulay/ps2-atmega32-board-robocon2013/master/images/ps2_atmega32_sch.png">
            <img src="https://raw.githubusercontent.com/GuruMulay/ps2-atmega32-board-robocon2013/master/images/ps2_atmega32_sch.png" alt="Atmega32-PS2 interface PCB schematic" align="middle" hspace="0" height="300">
        </a>
        <br/>
        <br/>
        <figcaption>Fig. 6: Atmega32-PS2 interface PCB schematic</figcaption>
    </div>
    <br/>
</p>

